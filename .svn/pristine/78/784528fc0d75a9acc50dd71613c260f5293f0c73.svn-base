using Microsoft.EntityFrameworkCore;
using SAMLitigation.Models.ApplicationDbContext;
using SAMLitigation.Models.ViewModel;

namespace SAMLitigation.Services.ServiceImple
{
    public class DashboardServiceImple : DashboardService
    {
        private readonly SAMDbContext _context;

        public DashboardServiceImple(SAMDbContext context)
        {
            _context = context;
        }

        public DashboardViewModel GetDashboardAllCount()
        {
            try
            {
                var dashboardCount = _context.Set<DashboardViewModel>()
                               .FromSqlRaw("EXEC GetSAMDashboardAllCount")
                               .AsEnumerable()
                               .FirstOrDefault();
                               
                return dashboardCount;
            } 
            catch
            {
                throw;
            }
        }
    }
}
